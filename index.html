<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Historical Figure Simulator</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:#f5f6fb; margin:0; }
    .container { max-width: 960px; margin: 24px auto; background:#fff; border:1px solid #e6e8ef; border-radius:10px; box-shadow:0 6px 18px rgba(18, 38, 63, 0.06); }
    .header { padding: 18px 22px; border-bottom:1px solid #eef0f5; }
    .header h1 { margin: 0; font-weight: 700; color:#1c2430; letter-spacing:.2px; }
    .chat { height: 520px; overflow-y: auto; padding: 18px 22px; }
    .msg { margin: 10px 0; line-height:1.5; color:#1f2a37; }
    .msg.you { color:#2b5dcc; }
    .msg.agent { color:#0f172a; }
    .tag { display:inline-block; font-size:12px; padding:2px 8px; border-radius:999px; background:#eef2ff; color:#3843d0; margin-left:6px; vertical-align:middle; }
    .footer { display:flex; gap:10px; padding: 14px 16px; border-top:1px solid #eef0f5; background:#fafbff; }
    .input { flex:1; padding:12px 14px; border:1px solid #d7dbe7; border-radius:8px; outline:none; font-size:15px; transition:border .15s ease; background:#fff; }
    .input:focus { border-color:#8492ff; box-shadow:0 0 0 3px rgba(132,146,255,.15); }
    .send { padding: 0 18px; min-width:90px; background:#3a57ff; color:#fff; border:0; border-radius:8px; cursor:pointer; font-weight:600; }
    .send:disabled { background:#b8c1ff; cursor:not-allowed; }
    .subtitle { font-size: 13px; color:#5b6475; margin-top:6px; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Historical Figure Simulator <span class="tag">Curator</span></h1>
      <div class="subtitle">Type naturally. To switch personas, say “talk to Cleopatra”, “switch to Einstein”, etc.</div>
    </div>

    <div id="chat" class="chat"></div>

    <div class="footer">
      <input id="message" class="input" type="text" placeholder="Type your message..." autocomplete="off" />
      <button id="send" class="send">Send</button>
    </div>
  </div>

  <script>
    const chatDiv = document.getElementById('chat');
    const input = document.getElementById('message');
    const sendBtn = document.getElementById('send');

    function addMsg(text, cls) {
      const p = document.createElement('p');
      p.className = 'msg ' + cls;
      p.textContent = text;
      chatDiv.appendChild(p);
      chatDiv.scrollTop = chatDiv.scrollHeight;
    }

    async function send() {
      const text = input.value.trim();
      if (!text) return;
      input.value = '';
      addMsg('You: ' + text, 'you');

      try {
        const res = await fetch('http://127.0.0.1:8000/chat', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ message: text })
        });
        const data = await res.json();
        addMsg(data.reply, 'agent');
      } catch (e) {
        addMsg('System: Failed to reach server.', 'agent');
      }
    }

    sendBtn.addEventListener('click', send);
    input.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') send();
    });

    // Initial curator greeting
    addMsg('Curator: Hello! Who would you like to speak with today? You can say “Albert Einstein”, “Leonardo da Vinci”, or “Cleopatra”.', 'agent');
  </script>
</body>
</html>
